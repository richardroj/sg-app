
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Car App</title>

   
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="http://getbootstrap.com/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet">
    <link href="../static/css/signup.css" rel="stylesheet">
    <script src="../static/js/jquery-1.11.2.js"></script>
    <script src="../static/js/signUp.js"></script>
    <style>
      .progress {
          width: 20%;
          background-color: #ddd;
      }
      .bar {
          width: 0%;
          height: 30px;
          background-color: #4caf50;
          text-align: center;
          line-height: 30px;
          color: white;
      }
  </style>
  </head>

  <body>

    <div class="container">
      <div class="header">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" ><a href="/">Home</a></li>
          </ul>
        </nav>
      </div>
      <center>
        <div class="wp-block-columns are-vertically-aligned-center is-layout-flex wp-container-core-columns-layout-1 wp-block-columns-is-layout-flex">
          <div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:33.33%">
          <figure class="wp-block-image size-full"><img decoding="async" width="290" height="76"  src="http://sgtuners.es/wp-content/uploads/2022/08/cropped-sgtuners-e1661791247516-2.png" alt="" class="wp-image-73 lazyloaded" data-src="http://sgtuners.es/wp-content/uploads/2022/08/cropped-sgtuners-e1661791247516-2.png" data-eio-rwidth="290" data-eio-rheight="76"><noscript><img decoding="async" width="290" height="76" src="http://sgtuners.es/wp-content/uploads/2022/08/cropped-sgtuners-e1661791247516-2.png" href="#" alt="" class="wp-image-73" data-eio="l" /></noscript></figure>
          </div>
        
        <div class="jumbotron">
          <h1>Chiptuning</h1>
          <p class="lead"></p>
        </div>

      <div class="jumbotron">
        <h1>Selecciona las propiedades del Veh√≠culo y pulsa procesar</h1>
        <form class="form-process" action="/process" method="POST" >
          <div><label for="brand">Choose Brand:</label>
        <select id="brand" name="brand" method="GET" action="/" onchange="updateBrand(this.value)">
          {% for brand in brands %}
          <option value= "{{brand}}" SELECTED>{{ brand }}</option>"
          {% endfor %}
      </select></div>
    <div><p></p><label for="ecu">Choose ECU:</label>
    <select id="ecu" name="ecu" onchange="updateEcu(this.value)">
    </select>
        
      </div>
      <div><p></p><label for="engine">Choose Engine:</label>
        <select id="engine" name="engine">
        </select>
            
          </div>
      <div>
        <div><p></p>
        </div>
        <button id="btnSignUp" class="btn btn-lg btn-primary btn-block" type="submit" >Procesar</button>
      </div>
      <div><p></p>
       
      </div>
    </form>
      </div>

      

      <footer class="footer">
        <p>&copy; Company 2024</p>
      </footer>

    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      function updateBrand(brand) {
          fetch(`/getEcu/${brand}`)
              .then(response => response.json())
              .then(data => {
                  const ecuSelect = document.getElementById('ecu');
                  ecuSelect.innerHTML = ''; // Clear existing options

                  data.forEach(brand => {
                      const option = document.createElement('option');
                      option.value = brand;
                      option.textContent = brand;
                      ecuSelect.appendChild(option);
                  });
              });
      }

      function updateEcu(ecu) {
          brand = document.getElementById('brand').value;
          fetch(`/getEngine/brand/${brand}/ecu/${ecu}`)
              .then(response => response.json())
              .then(data => {
                  const engineSelect = document.getElementById('engine');
                  engineSelect.innerHTML = ''; // Clear existing options

                  data.forEach(ecu => {
                      const option = document.createElement('option');
                      option.value = ecu;
                      option.textContent = ecu;
                      engineSelect.appendChild(option);
                  });
              });
      }

      
  </script>
  </center>
  </body>
</html>

